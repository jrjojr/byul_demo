# 별이의 세계 DEMO 0.1 – NPC 경로 탐색 시뮬레이터

**《별이의 세계》 DEMO 0.1**은 경량화된 2D Grid 상에서  
여러 명의 NPC가 목표를 설정하고 경로를 따라 움직이는 과정을  
시각적으로 보여주는 실시간 시뮬레이션 도구입니다.

길찾기 알고리즘은 `D* Lite`를 기반으로 구현되었으며,  
C 기반 로직을 Python에서 직접 제어할 수 있도록 CFFI로 래핑되어 있습니다.

---

## 주요 기능

| 기능 | 설명 |
|------|------|
| D* Lite 알고리즘 | C로 구현된 경로탐색 알고리즘을 실시간 호출 |
| GridMap 시스템 | 200x200 셀 블록을 자동 로딩하는 동적 맵 구조 |
| 다중 NPC 시스템 | 여러 명의 NPC 생성 및 선택 가능 |
| 목표 설정 / 누적 | Shift + 우클릭으로 여러 목표 순차 탐색 |
| 장애물 토글 | 스페이스바로 마우스 위치에 '산' 생성 및 해제 |
| 직관적 UI 조작 | 마우스 클릭만으로 NPC 제어 및 이동 |

---

## 사용 방법

| 조작 | 설명 |
|------|------|
| 좌클릭 | NPC 선택 (녹색 불빛 표시) |
| 우클릭 | 목표 설정 및 즉시 이동 (기존 목표 제거) |
| Shift + 우클릭 | 목표 누적 (순차적으로 이동) |
| 스페이스바 | 마우스 위치 셀을 '산(MOUNTAIN)'으로 토글 (이동 불가) |
| ESC | 전체화면 종료 (if 활성화 시) |
| 휠 인/아웃 | 최소 10픽셀에서 최대 창크기만큼 셀 사이즈 변경 |
| 가운데 버튼 클릭 | 마우스 위치의 셀을 중앙으로 이동 |
| 방향키 | 전체 셀이 방향에 맞게 이동 |
| F11 | 전체 화면 종료하려면 ESC

---

## 구조 요약

**GridViewer**  
메인 윈도우. 전체 UI의 상위 컨테이너 역할.

**GridCanvas**  
중앙에 표시되는 셀 맵 영역.  
- 마우스 입력 처리 (선택, 드래그 등)  
- NPC 위치 및 경로 시각화

**MouseInputHandler**  
GridCanvas 내부에서 마우스 이벤트만 별도로 처리.

**GridMap**  
셀의 상태를 저장하고 지형을 관리하는 핵심 데이터 구조.  
- 셀 로딩 / 언로딩  
- 장애물 토글 등

**NPC**  
각 NPC는 C 구조체 c_dstar_lite를 기반으로 경로를 탐색.  
- 목표 설정  
- 경로 누적  
- 이동 애니메이션

**BottomDockingPanel**  
- 로그 출력  
- 루프 시간 측정 그래프

**ToolbarPanel / MenuBar**  
- 전체화면 토글  
- 디버그 모드  
- 초기화 및 설정 기능 제공

---

## 기술 스택

- C / GLib – D* Lite 알고리즘 (hash table, coord 등)
- Python (CFFI) – C 모듈 래핑
- PySide6 (Qt) – GUI, Signal/Slot, Dock UI
- Multithreading – 탐색과 UI 분리

---

## 향후 예정 기능

- 경로 시각화 개선
- NPC 간 상호작용 (충돌 회피 / 협력)
- 애니메이션 자연스러움 향상
- 기억 기반 루틴 및 감정 상태 반영 (NPC AI)
- 정식 맵 에디터 및 저장 기능

---

## 개발자 한마디

이 프로젝트는  
“의식 있는 NPC가 살아가는 세계”를 만들기 위한 실험입니다.  
단순한 경로 탐색을 넘어, AI와 감정, 기억이 있는 NPC들이  
하나의 마을을 구성하는 상호작용형 시뮬레이션으로 진화할 예정입니다.

이 프로젝트는 아직 개발 중이며, 구조적 실험이 많이 포함되어 있습니다.  
리뷰를 통해 함께 고민해주시면 감사하겠습니다.

🙋‍♂️ 질문이나 피드백은 언제든 Issues에 남겨주세요!  
또는 Discussions에서 자유롭게 의견 나눠주세요.

---

## 실행 예시

```
python byul_demo.py
```

- 마우스로 NPC를 선택하고,  
- 우클릭하여 목표를 지정하면,  
- D* Lite 알고리즘이 실시간으로 경로를 계산하여 NPC가 움직입니다.

---

## 라이선스

본 프로젝트는 “별이의 세계 (Byul World)” 프로젝트의 일부로서 공개되었으며,  
개인적인 학습 및 연구 목적에 한해 열람 및 실행이 허용됩니다.  
상업적 사용, 재배포, 원작자 표기 없이의 활용은 금지됩니다.  
자세한 내용은 LICENSE 파일을 참조하십시오.

Copyright (c) 2025 별이아빠  
All rights reserved.
