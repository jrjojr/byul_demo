# ⭐ 별이의 세계 DEMO 0.1 – NPC 경로 탐색 시뮬레이터

**《별이의 세계》 DEMO 0.1**은 경량화된 2D Grid 상에서  
여러 명의 NPC가 **목표를 설정하고 경로를 따라 움직이는 과정**을  
시각적으로 보여주는 **실시간 시뮬레이션 도구**입니다.

> 💡 길찾기 알고리즘은 `D* Lite`를 기반으로 구현되었으며,  
> C 기반 로직을 Python에서 직접 제어할 수 있도록 **CFFI로 래핑**되어 있습니다.

---

## 🚀 주요 기능

| 기능 | 설명 |
|------|------|
| 🧠 **D* Lite 알고리즘** | C로 구현된 경로탐색 알고리즘을 실시간 호출 |
| 🗺️ **GridMap 시스템** | 200x200 셀 블록을 자동 로딩하는 동적 맵 구조 |
| 🧍 **다중 NPC 시스템** | 여러 명의 NPC 생성 및 선택 가능 |
| 🎯 **목표 설정 / 누적** | Shift + 우클릭으로 여러 목표 순차 탐색 |
| 🧱 **장애물 토글** | 스페이스바로 마우스 위치에 '산' 생성 및 해제 |
| 🖱️ **직관적 UI 조작** | 마우스 클릭만으로 NPC 제어 및 이동 |

---

## 🎮 사용 방법

| 조작 | 설명 |
|------|------|
| **좌클릭** | NPC 선택 (녹색 불빛 표시) |
| **우클릭** | 목표 설정 및 즉시 이동 (기존 목표 제거) |
| **Shift + 우클릭** | 목표 누적 (순차적으로 이동) |
| **스페이스바** | 마우스 위치 셀을 '산(MOUNTAIN)'으로 토글 (이동 불가) |
| **ESC** | 전체화면 종료 (if 활성화 시) |
| **휠 인, 아웃** | 최소 10픽셀에서 최대 창크기만큼 셀 사이즈 변경
| **가운데 버튼 클릭** | 마우스 위치의 셀을 중앙으로 이동
| **방향키** | 전체 셀이 방향에 맞게 이동
| **F11**| 전체 화면 종료하려면 ESC

---

## 🧩 구조 요약

GridViewer (QMainWindow)
├── GridCanvas (중앙 맵 표시 및 클릭 이벤트)
│ └── MouseInputHandler (마우스 처리: 클릭, 드래그 등)
├── GridMap (셀 상태 및 지형 제어)
├── NPC (c_dstar_lite 기반 경로탐색)
├── BottomDockingPanel (로그 및 루프 시간 그래프)
└── ToolbarPanel / MenuBar (모드 전환 및 기능 호출)


---

## 🛠️ 기술 스택

- **C / GLib** – D* Lite 알고리즘 (hash table, coord 등)
- **Python (CFFI)** – C 모듈 래핑
- **PySide6 (Qt)** – GUI, Signal/Slot, Dock UI
- **Multithreading** – 탐색과 UI 분리

---

## 📦 향후 예정 기능

- ✅ 경로 시각화 개선
- ⏳ NPC 간 상호작용 (충돌 회피 / 협력)
- ⏳ 애니메이션 자연스러움 향상
- ⏳ 기억 기반 루틴 및 감정 상태 반영 (NPC AI)
- ⏳ 정식 맵 에디터 및 저장 기능

---

## 🤍 개발자 한마디

이 프로젝트는 혼자서 꾸준히 확장해온  
“**의식 있는 NPC가 살아가는 세계**”를 만들기 위한 실험입니다.  
단순한 경로 탐색을 넘어, **AI와 감정, 기억이 있는 NPC**들이  
하나의 마을을 구성하는 상호작용형 시뮬레이션으로 진화할 예정입니다.

"이 프로젝트는 아직 개발 중이며, 구조적 실험이 많이 포함되어 있습니다.
리뷰를 통해 함께 고민해주시면 감사하겠습니다."
---

## 📂 실행 예시

> ```
> python byul_demo.py
> ```

- 마우스로 NPC를 선택하고,
- 우클릭하여 목표를 지정하면,
- D* Lite 알고리즘이 실시간으로 경로를 계산하여 NPC가 움직입니다.

---

## 🔗 관련 문서

- `/docs/dstar_lite_algorithm.md` (※ 향후 작성 예정)
- `/docs/npc_logic_overview.md` (※ 향후 작성 예정)
